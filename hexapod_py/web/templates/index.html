<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Hexapod Control</title>
    <link href="{{ url_for('static', path='/css/style.css') }}" rel="stylesheet">
</head>
<body>
    <h1>Hexapod Control Interface</h1>

    <div class="container">
        <div class="controls">
            <h2>Movement</h2>
            <div class="buttons">
                <button onclick="move('forward')">Forward</button>
                <button onclick="move('backward')">Backward</button>
                <button onclick="move('left')">Strafe Left</button>
                <button onclick="move('right')">Strafe Right</button>
                <button onclick="move('stop')" class="stop">Stop</button>
            </div>
            <p>Status: <span id="status">Idle</span></p>
        </div>

        {% if mode == 'simulation' %}
        <div class="video-feed">
            <h2>Camera Feed</h2>
            <img src="/video_feed/0" alt="Video Stream" width="640" height="480">
        </div>
        {% endif %}

        <div class="sensor-data">
            <h2>Sensor Data</h2>
            <div id="gps-data"></div>
            <div id="gyro-data"></div>
        </div>
    </div>

    <script>
        function move(direction) {
            fetch(`/move/${direction}`)
                .then(response => response.json())
                .then(data => {
                    document.getElementById('status').innerText = data.status;
                })
                .catch(error => console.error('Error:', error));
        }

        function fetchSensorData() {
            fetch('/sensor_data')
                .then(response => response.json())
                .then(data => {
                    document.getElementById('gps-data').innerText = `GPS: Lat ${data.gps_data.lat}, Lon ${data.gps_data.lon}`;
                    document.getElementById('gyro-data').innerText = `Gyro: X ${data.gyro_data.x}, Y ${data.gyro_data.y}, Z ${data.gyro_data.z}`;
                });
        }
        // setInterval(fetchSensorData, 2000); // Fetch sensor data every 2 seconds
    </script>
</body>
</html>